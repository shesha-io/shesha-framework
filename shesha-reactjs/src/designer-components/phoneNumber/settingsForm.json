{
    "components": [
        {
            "id": "phone_display_panel",
            "type": "collapsiblePanel",
            "propertyName": "pnlDisplay",
            "label": "Display",
            "labelAlign": "right",
            "parentId": "root",
            "hidden": false,
            "isDynamic": false,
            "version": 4,
            "expandIconPosition": "start",
            "header": {
                "id": "phone_display_header",
                "components": []
            },
            "content": {
                "id": "phone_display_content",
                "components": [
                    {
                        "id": "phone_property_name",
                        "type": "contextPropertyAutocomplete",
                        "propertyName": "propertyName",
                        "parentId": "phone_display_content",
                        "label": "Property name",
                        "validate": {
                            "required": true
                        }
                    },
                    {
                        "id": "phone_label",
                        "type": "textField",
                        "propertyName": "label",
                        "parentId": "phone_display_content",
                        "label": "Label",
                        "version": 3,
                        "textType": "text"
                    },
                    {
                        "id": "phone_label_align",
                        "type": "dropdown",
                        "propertyName": "labelAlign",
                        "parentId": "phone_display_content",
                        "label": "Label align",
                        "values": [
                            {
                                "label": "left",
                                "value": "left",
                                "id": "label_align_left"
                            },
                            {
                                "label": "right",
                                "value": "right",
                                "id": "label_align_right"
                            }
                        ],
                        "dataSourceType": "values",
                        "version": 5,
                        "referenceListId": null,
                        "valueFormat": "listItem"
                    },
                    {
                        "id": "phone_placeholder",
                        "type": "textField",
                        "propertyName": "placeholder",
                        "parentId": "phone_display_content",
                        "label": "Placeholder",
                        "version": 3,
                        "textType": "text"
                    },
                    {
                        "id": "phone_description",
                        "type": "textArea",
                        "propertyName": "description",
                        "parentId": "phone_display_content",
                        "label": "Description",
                        "version": 2
                    },
                    {
                        "id": "phone_value_format",
                        "type": "dropdown",
                        "propertyName": "valueFormat",
                        "parentId": "phone_display_content",
                        "label": "Value Format",
                        "description": "Format for the returned phone number value",
                        "values": [
                            {
                                "label": "International (+27123456789)",
                                "value": "string",
                                "id": "phone_format_string"
                            },
                            {
                                "label": "National (0123456789)",
                                "value": "national",
                                "id": "phone_format_national"
                            },
                            {
                                "label": "Object",
                                "value": "object",
                                "id": "phone_format_object"
                            }
                        ],
                        "dataSourceType": "values",
                        "version": 5,
                        "referenceListId": null,
                        "valueFormat": "listItem",
                        "defaultValue": "string"
                    },
                    {
                        "id": "phone_strip_country_code",
                        "type": "checkbox",
                        "propertyName": "stripCountryCode",
                        "parentId": "phone_display_content",
                        "label": "Strip Country Code",
                        "description": "When using International format, return the national format instead (e.g., +27123456789 becomes 0123456789 for ZA). The national format varies by country.",
                        "version": 2,
                        "hidden": {
                            "_code": "return getSettingValue(data?.valueFormat) !== 'string';",
                            "_mode": "code",
                            "_value": false
                        }
                    },
                    {
                        "id": "phone_hidden",
                        "type": "checkbox",
                        "propertyName": "hidden",
                        "parentId": "phone_display_content",
                        "label": "Hidden",
                        "version": 2
                    },
                    {
                        "id": "phone_hide_label",
                        "type": "checkbox",
                        "propertyName": "hideLabel",
                        "parentId": "phone_display_content",
                        "label": "Hide Label",
                        "version": 2
                    }
                ]
            },
            "collapsible": "header",
            "ghost": true,
            "hideWhenEmpty": true,
            "settingsValidationErrors": []
        },
        {
            "id": "phone_country_panel",
            "type": "collapsiblePanel",
            "propertyName": "pnlCountry",
            "label": "Country Settings",
            "labelAlign": "right",
            "parentId": "root",
            "hidden": false,
            "isDynamic": false,
            "version": 4,
            "expandIconPosition": "start",
            "header": {
                "id": "phone_country_header",
                "components": []
            },
            "content": {
                "id": "phone_country_content",
                "components": [
                    {
                        "id": "phone_default_country",
                        "type": "textField",
                        "propertyName": "defaultCountry",
                        "parentId": "phone_country_content",
                        "label": "Default Country",
                        "description": "ISO country code (e.g., za, us, gb)",
                        "version": 3,
                        "textType": "text",
                        "defaultValue": "za"
                    },
                    {
                        "id": "phone_preferred_countries",
                        "type": "textField",
                        "propertyName": "preferredCountries",
                        "parentId": "phone_country_content",
                        "label": "Preferred Countries",
                        "description": "Comma-separated country codes to show at top (e.g., za,us,gb)",
                        "version": 3,
                        "textType": "text"
                    },
                    {
                        "id": "phone_only_countries",
                        "type": "textField",
                        "propertyName": "onlyCountries",
                        "parentId": "phone_country_content",
                        "label": "Only Countries",
                        "description": "Comma-separated country codes to include (e.g., za,us,gb). If set, only these will be shown",
                        "version": 3,
                        "textType": "text"
                    },
                    {
                        "id": "phone_exclude_countries",
                        "type": "textField",
                        "propertyName": "excludeCountries",
                        "parentId": "phone_country_content",
                        "label": "Exclude Countries",
                        "description": "Comma-separated country codes to exclude from list (e.g., us,ca)",
                        "version": 3,
                        "textType": "text"
                    }
                ]
            },
            "collapsible": "header",
            "ghost": true,
            "hideWhenEmpty": true,
            "settingsValidationErrors": []
        },
        {
            "id": "phone_behavior_panel",
            "type": "collapsiblePanel",
            "propertyName": "pnlBehavior",
            "label": "Behavior",
            "labelAlign": "right",
            "parentId": "root",
            "hidden": false,
            "defaultValue": true,
            "isDynamic": false,
            "version": 4,
            "expandIconPosition": "start",
            "header": {
                "id": "phone_behavior_header",
                "components": []
            },
            "content": {
                "id": "phone_behavior_content",
                "components": [
                    {
                        "id": "phone_edit_mode",
                        "type": "editModeSelector",
                        "propertyName": "editMode",
                        "parentId": "phone_behavior_content",
                        "label": "Edit mode"
                    },
                    {
                        "id": "phone_allow_clear",
                        "type": "checkbox",
                        "propertyName": "allowClear",
                        "parentId": "phone_behavior_content",
                        "label": "Allow Clear",
                        "version": 2
                    },
                    {
                        "id": "phone_enable_arrow",
                        "type": "checkbox",
                        "propertyName": "enableArrow",
                        "parentId": "phone_behavior_content",
                        "label": "Enable Arrow",
                        "description": "Display arrow icons in the phone input",
                        "version": 2
                    },
                    {
                        "id": "phone_distinct",
                        "type": "checkbox",
                        "propertyName": "distinct",
                        "parentId": "phone_behavior_content",
                        "label": "Show Distinct Country Codes",
                        "description": "Display only distinct country codes in the dropdown",
                        "version": 2
                    },
                    {
                        "id": "phone_disable_dropdown",
                        "type": "checkbox",
                        "propertyName": "disableDropdown",
                        "parentId": "phone_behavior_content",
                        "label": "Disable Dropdown",
                        "description": "Prevent users from changing the country via dropdown",
                        "version": 2
                    },
                    {
                        "id": "phone_disable_parentheses",
                        "type": "checkbox",
                        "propertyName": "disableParentheses",
                        "parentId": "phone_behavior_content",
                        "label": "Disable Parentheses",
                        "description": "Remove parentheses from phone number input mask",
                        "version": 2
                    }
                ]
            },
            "collapsible": "header",
            "ghost": true,
            "hideWhenEmpty": true,
            "settingsValidationErrors": []
        },
        {
            "id": "phone_data_panel",
            "type": "collapsiblePanel",
            "propertyName": "pnlData",
            "label": "Data",
            "labelAlign": "right",
            "parentId": "root",
            "hidden": false,
            "isDynamic": false,
            "version": 4,
            "expandIconPosition": "start",
            "header": {
                "id": "phone_data_header",
                "components": []
            },
            "content": {
                "id": "phone_data_content",
                "components": [
                    {
                        "id": "phone_initial_value",
                        "type": "textField",
                        "propertyName": "initialValue",
                        "parentId": "phone_data_content",
                        "label": "Default Value",
                        "validate": {},
                        "settingsValidationErrors": [],
                        "description": "Enter default value of component. (formData, formMode, globalState) are exposed",
                        "version": 3,
                        "textType": "text"
                    }
                ]
            },
            "collapsible": "header",
            "ghost": true,
            "hideWhenEmpty": true,
            "settingsValidationErrors": []
        },
        {
            "id": "phone_events_panel",
            "type": "collapsiblePanel",
            "propertyName": "pnlEvents",
            "label": "Events",
            "labelAlign": "right",
            "parentId": "root",
            "hidden": false,
            "isDynamic": false,
            "version": 4,
            "expandIconPosition": "start",
            "header": {
                "id": "phone_events_header",
                "components": []
            },
            "content": {
                "id": "phone_events_content",
                "components": [
                    {
                        "id": "phone_on_change",
                        "type": "codeEditor",
                        "propertyName": "onChangeCustom",
                        "label": "On Change",
                        "labelAlign": "right",
                        "parentId": "phone_events_content",
                        "hidden": false,
                        "description": "Enter custom event handler on changing of value. The callback triggered when the phone number is changed. Available variables: value (phone number), phoneValue (raw input object)",
                        "validate": {},
                        "settingsValidationErrors": [],
                        "exposedVariables": [
                            {
                                "name": "data",
                                "description": "Selected form values",
                                "type": "object"
                            },
                            {
                                "name": "form",
                                "description": "Form instance",
                                "type": "FormInstance"
                            },
                            {
                                "name": "formMode",
                                "description": "The form mode",
                                "type": "'readonly' | 'edit' | 'designer'"
                            },
                            {
                                "name": "globalState",
                                "description": "The global state of the application",
                                "type": "object"
                            },
                            {
                                "name": "http",
                                "description": "axios instance used to make http requests",
                                "type": "object"
                            },
                            {
                                "name": "message",
                                "description": "This is the Ant API for displaying toast messages. See: https://ant.design/components/message/#header",
                                "type": "object"
                            },
                            {
                                "name": "moment",
                                "description": "The moment.js object",
                                "type": "object"
                            },
                            {
                                "name": "value",
                                "description": "Component current value (phone number)",
                                "type": "string | IPhoneNumberValue"
                            },
                            {
                                "name": "phoneValue",
                                "description": "Raw phone input object from antd-phone-input",
                                "type": "object"
                            },
                            {
                                "name": "setFormData",
                                "description": "A function used to update the form data",
                                "type": "({ values: object, mergeValues: boolean}) => void"
                            },
                            {
                                "name": "setGlobalState",
                                "description": "Setting the global state of the application",
                                "type": "(payload: { key: string, data: any } ) => void"
                            }
                        ],
                        "version": 3,
                        "language": "typescript",
                        "placeholder": "",
                        "wrapInTemplate": true,
                        "templateSettings": {
                            "functionName": "onChange"
                        },
                        "availableConstantsExpression": "    return metadataBuilder.object(\"constants\")\r\n        .addAllStandard()\r\n        .addString(\"value\", \"Component current value (phone number)\")\r\n        .addObject(\"phoneValue\", \"Raw phone input object\")\r\n        .build();"
                    },
                    {
                        "id": "phone_on_blur",
                        "type": "codeEditor",
                        "propertyName": "onBlurCustom",
                        "label": "On Blur",
                        "labelAlign": "right",
                        "parentId": "phone_events_content",
                        "hidden": false,
                        "description": "Custom event handler triggered when the phone input loses focus",
                        "validate": {},
                        "settingsValidationErrors": [],
                        "exposedVariables": [
                            {
                                "name": "data",
                                "description": "Selected form values",
                                "type": "object"
                            },
                            {
                                "name": "form",
                                "description": "Form instance",
                                "type": "FormInstance"
                            },
                            {
                                "name": "formMode",
                                "description": "The form mode",
                                "type": "'readonly' | 'edit' | 'designer'"
                            },
                            {
                                "name": "globalState",
                                "description": "The global state of the application",
                                "type": "object"
                            },
                            {
                                "name": "event",
                                "description": "The blur event object",
                                "type": "FocusEvent"
                            }
                        ],
                        "version": 3,
                        "language": "typescript",
                        "placeholder": "",
                        "wrapInTemplate": true,
                        "templateSettings": {
                            "functionName": "onBlur"
                        }
                    },
                    {
                        "id": "phone_on_focus",
                        "type": "codeEditor",
                        "propertyName": "onFocusCustom",
                        "label": "On Focus",
                        "labelAlign": "right",
                        "parentId": "phone_events_content",
                        "hidden": false,
                        "description": "Custom event handler triggered when the phone input receives focus",
                        "validate": {},
                        "settingsValidationErrors": [],
                        "exposedVariables": [
                            {
                                "name": "data",
                                "description": "Selected form values",
                                "type": "object"
                            },
                            {
                                "name": "form",
                                "description": "Form instance",
                                "type": "FormInstance"
                            },
                            {
                                "name": "formMode",
                                "description": "The form mode",
                                "type": "'readonly' | 'edit' | 'designer'"
                            },
                            {
                                "name": "globalState",
                                "description": "The global state of the application",
                                "type": "object"
                            },
                            {
                                "name": "event",
                                "description": "The focus event object",
                                "type": "FocusEvent"
                            }
                        ],
                        "version": 3,
                        "language": "typescript",
                        "placeholder": "",
                        "wrapInTemplate": true,
                        "templateSettings": {
                            "functionName": "onFocus"
                        }
                    }
                ]
            },
            "collapsible": "header",
            "ghost": true,
            "hideWhenEmpty": true,
            "settingsValidationErrors": []
        },
        {
            "id": "phone_validation_panel",
            "type": "collapsiblePanel",
            "propertyName": "pnlValidation",
            "label": "Validation",
            "labelAlign": "right",
            "parentId": "root",
            "hidden": false,
            "isDynamic": false,
            "version": 4,
            "expandIconPosition": "start",
            "header": {
                "id": "phone_validation_header",
                "components": []
            },
            "content": {
                "id": "phone_validation_content",
                "components": [
                    {
                        "id": "phone_required",
                        "type": "checkbox",
                        "propertyName": "validate.required",
                        "parentId": "phone_validation_content",
                        "label": "Required",
                        "version": 2
                    }
                ]
            },
            "collapsible": "header",
            "ghost": true,
            "hideWhenEmpty": true,
            "settingsValidationErrors": []
        },
        {
            "id": "phone_property_router",
            "type": "propertyRouter",
            "propertyName": "propertyRouter1",
            "componentName": "propertyRouter1",
            "label": "Property router1",
            "labelAlign": "right",
            "parentId": "root",
            "hidden": false,
            "isDynamic": false,
            "propertyRouteName": {
                "_mode": "code",
                "_code": "    return contexts.canvasContext?.designerDevice || 'desktop';",
                "_value": ""
            },
            "components": [
                {
                    "id": "phone_style_panel",
                    "type": "collapsiblePanel",
                    "propertyName": "pnlStyle",
                    "label": "Style",
                    "labelAlign": "right",
                    "parentId": "root",
                    "hidden": false,
                    "isDynamic": false,
                    "version": 4,
                    "expandIconPosition": "start",
                    "header": {
                        "id": "phone_style_header",
                        "components": []
                    },
                    "content": {
                        "id": "phone_style_content",
                        "components": [
                            {
                                "id": "phone_style_code",
                                "type": "codeEditor",
                                "propertyName": "style",
                                "label": "Style (All Elements)",
                                "parentId": "phone_style_content",
                                "validate": {},
                                "settingsValidationErrors": [],
                                "description": "A script that returns the style applied to all phone input elements. This should conform to CSSProperties",
                                "mode": "dialog",
                                "exposedVariables": [
                                    {
                                        "name": "data",
                                        "description": "Form values",
                                        "type": "object"
                                    }
                                ],
                                "version": 3,
                                "language": "typescript",
                                "placeholder": "",
                                "wrapInTemplate": true,
                                "templateSettings": {
                                    "functionName": "getStyle"
                                },
                                "availableConstantsExpression": "    return metadataBuilder.object(\"constants\").addStandard([\"shesha:formData\", \"shesha:globalState\"]).build();"
                            },
                            {
                                "id": "phone_styles",
                                "type": "codeEditor",
                                "propertyName": "styles",
                                "label": "Component Styles",
                                "parentId": "phone_style_content",
                                "validate": {},
                                "settingsValidationErrors": [],
                                "description": "Define styles for phone input elements. Return a CSSProperties object to apply to all elements, or return an object with specific keys: { wrapper, inputGroupWrapper, inputWrapper, inputGroup, input }",
                                "mode": "dialog",
                                "exposedVariables": [
                                    {
                                        "name": "data",
                                        "description": "Form values",
                                        "type": "object"
                                    },
                                    {
                                        "name": "wrapper",
                                        "description": "Style for .ant-phone-input-wrapper (outermost container)",
                                        "type": "React.CSSProperties"
                                    },
                                    {
                                        "name": "inputGroupWrapper",
                                        "description": "Style for .ant-input-group-wrapper",
                                        "type": "React.CSSProperties"
                                    },
                                    {
                                        "name": "inputWrapper",
                                        "description": "Style for .ant-input-wrapper",
                                        "type": "React.CSSProperties"
                                    },
                                    {
                                        "name": "inputGroup",
                                        "description": "Style for .ant-input-group (contains flag dropdown and input)",
                                        "type": "React.CSSProperties"
                                    },
                                    {
                                        "name": "input",
                                        "description": "Style for .ant-input (the actual phone number input field)",
                                        "type": "React.CSSProperties"
                                    }
                                ],
                                "version": 3,
                                "language": "typescript",
                                "placeholder": "// Apply same styles to all elements:\nreturn { width: '100%', fontSize: '14px' };\n\n// Or target specific elements:\nreturn {\n  wrapper: { backgroundColor: '#f0f0f0' },\n  input: { color: 'blue', fontWeight: 'bold' }\n};",
                                "wrapInTemplate": true,
                                "templateSettings": {
                                    "functionName": "getStyles"
                                },
                                "availableConstantsExpression": "    return metadataBuilder.object(\"constants\").addStandard([\"shesha:formData\", \"shesha:globalState\"]).build();"
                            },
                            {
                                "id": "phone_size",
                                "type": "dropdown",
                                "propertyName": "size",
                                "parentId": "phone_style_content",
                                "label": "Size",
                                "allowClear": true,
                                "values": [
                                    {
                                        "label": "Small",
                                        "value": "small",
                                        "id": "size_small"
                                    },
                                    {
                                        "label": "Middle",
                                        "value": "middle",
                                        "id": "size_middle"
                                    },
                                    {
                                        "label": "Large",
                                        "value": "large",
                                        "id": "size_large"
                                    }
                                ],
                                "dataSourceType": "values",
                                "version": 5,
                                "referenceListId": null,
                                "valueFormat": "listItem"
                            }
                        ]
                    },
                    "collapsible": "header",
                    "ghost": true,
                    "hideWhenEmpty": true,
                    "settingsValidationErrors": []
                },
                {
                    "id": "phone_security_panel",
                    "type": "collapsiblePanel",
                    "propertyName": "pnlSecurity",
                    "label": "Security",
                    "labelAlign": "right",
                    "parentId": "root",
                    "isDynamic": false,
                    "version": 4,
                    "expandIconPosition": "start",
                    "header": {
                        "id": "phone_security_header",
                        "components": []
                    },
                    "content": {
                        "id": "phone_security_content",
                        "components": [
                            {
                                "id": "phone_permissions",
                                "type": "permissionAutocomplete",
                                "propertyName": "permissions",
                                "parentId": "phone_security_content",
                                "label": "Permissions",
                                "validate": {},
                                "version": 1
                            }
                        ]
                    },
                    "collapsible": "header",
                    "ghost": true,
                    "hideWhenEmpty": true,
                    "settingsValidationErrors": []
                }
            ]
        }
    ],
    "formSettings": {
        "layout": "horizontal",
        "colon": true,
        "labelCol": {
            "span": 8
        },
        "wrapperCol": {
            "span": 16
        }
    }
}